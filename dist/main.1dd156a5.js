parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"eKDL":[function(require,module,exports) {
"use strict";var e,E,r;Object.defineProperty(exports,"__esModule",{value:!0}),exports.KEYS=exports.BlockType=exports.DIR=exports.SHOOT_COLDOWN=exports.TANK_HEIGHT=exports.TANK_WIDTH=exports.BULLET_SPEED=exports.BULLET_SIZE=exports.CLUSTER_SIZE=exports.BLOCK_SIZE=exports.CANVAS_HEIGHT=exports.CANVAS_WIDTH=exports.MOVE_STEP=exports.GLOBAL_MODE=void 0,function(e){e[e.NORMAL_GAME=0]="NORMAL_GAME",e[e.DEBUG_TEST_LEVEL=1]="DEBUG_TEST_LEVEL",e[e.EDIT_TEST_LEVEL=2]="EDIT_TEST_LEVEL"}(e=exports.GLOBAL_MODE||(exports.GLOBAL_MODE={})),exports.MOVE_STEP=2,exports.CANVAS_WIDTH=416,exports.CANVAS_HEIGHT=416,exports.BLOCK_SIZE=8,exports.CLUSTER_SIZE=2,exports.BULLET_SIZE=8,exports.BULLET_SPEED=4,exports.TANK_WIDTH=32,exports.TANK_HEIGHT=32,exports.SHOOT_COLDOWN=200,function(e){e[e.NONE=-1]="NONE",e[e.UP=0]="UP",e[e.RIGHT=1]="RIGHT",e[e.DOWN=2]="DOWN",e[e.LEFT=3]="LEFT"}(E=exports.DIR||(exports.DIR={})),function(e){e[e.Brick=0]="Brick",e[e.Steel=1]="Steel",e[e.Tree=2]="Tree",e[e.Water=3]="Water"}(r=exports.BlockType||(exports.BlockType={})),exports.KEYS={LEFT:"ArrowLeft",RIGHT:"ArrowRight",UP:"ArrowUp",DOWN:"ArrowDown",SHOOT:"Space"};
},{}],"dCQQ":[function(require,module,exports) {
module.exports="/player_1.c9b917d8.png";
},{}],"bmcx":[function(require,module,exports) {
module.exports="/brick_1.be1c0ae5.png";
},{}],"RX5K":[function(require,module,exports) {
module.exports="/brick_2.f05c2e8e.png";
},{}],"QeYO":[function(require,module,exports) {
module.exports="/brick_3.74ff3ca7.png";
},{}],"LyXN":[function(require,module,exports) {
module.exports="/brick_4.f66ef00f.png";
},{}],"NvEq":[function(require,module,exports) {
module.exports="/stone_1.f03e93d4.png";
},{}],"ohDj":[function(require,module,exports) {
module.exports="/stone_2.3893dc34.png";
},{}],"UHSI":[function(require,module,exports) {
module.exports="/stone_3.b4ec65b3.png";
},{}],"aEhS":[function(require,module,exports) {
module.exports="/stone_4.3d143e42.png";
},{}],"z74z":[function(require,module,exports) {
module.exports="/tree_1.534d40ec.png";
},{}],"NP97":[function(require,module,exports) {
module.exports="/tree_2.89cd28fd.png";
},{}],"rv7i":[function(require,module,exports) {
module.exports="/tree_3.2eb36ea7.png";
},{}],"LaAz":[function(require,module,exports) {
module.exports="/tree_4.4d528f97.png";
},{}],"g4QA":[function(require,module,exports) {
module.exports="/water_1.7aa1d1a3.png";
},{}],"tfwV":[function(require,module,exports) {
module.exports="/water_2.d19bddb6.png";
},{}],"d2j2":[function(require,module,exports) {
module.exports="/water_3.04cad805.png";
},{}],"gZbf":[function(require,module,exports) {
module.exports="/water_4.7fd1f7e3.png";
},{}],"mKv2":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.preloadAssets=exports.SPRITES=void 0;var r=e(require("../assets/player_1.png")),t=e(require("../assets/brick_1.png")),s=e(require("../assets/brick_2.png")),a=e(require("../assets/brick_3.png")),i=e(require("../assets/brick_4.png")),u=e(require("../assets/stone_1.png")),l=e(require("../assets/stone_2.png")),f=e(require("../assets/stone_3.png")),n=e(require("../assets/stone_4.png")),_=e(require("../assets/tree_1.png")),o=e(require("../assets/tree_2.png")),p=e(require("../assets/tree_3.png")),d=e(require("../assets/tree_4.png")),g=e(require("../assets/water_1.png")),c=e(require("../assets/water_2.png")),q=e(require("../assets/water_3.png")),b=e(require("../assets/water_4.png"));function w(){var e=Object.keys(exports.SPRITES).map(function(e){return new Promise(function(r){var t=new Image;t.onload=function(){exports.SPRITES[e].img=t,r()},t.src=exports.SPRITES[e].file})});return Promise.all(e)}exports.SPRITES={player_1:{file:r.default},brick_1:{file:t.default},brick_2:{file:s.default},brick_3:{file:a.default},brick_4:{file:i.default},stone_1:{file:u.default},stone_2:{file:l.default},stone_3:{file:f.default},stone_4:{file:n.default},tree_1:{file:_.default},tree_2:{file:o.default},tree_3:{file:p.default},tree_4:{file:d.default},water_1:{file:g.default},water_2:{file:c.default},water_3:{file:q.default},water_4:{file:b.default}},exports.preloadAssets=w;
},{"../assets/player_1.png":"dCQQ","../assets/brick_1.png":"bmcx","../assets/brick_2.png":"RX5K","../assets/brick_3.png":"QeYO","../assets/brick_4.png":"LyXN","../assets/stone_1.png":"NvEq","../assets/stone_2.png":"ohDj","../assets/stone_3.png":"UHSI","../assets/stone_4.png":"aEhS","../assets/tree_1.png":"z74z","../assets/tree_2.png":"NP97","../assets/tree_3.png":"rv7i","../assets/tree_4.png":"LaAz","../assets/water_1.png":"g4QA","../assets/water_2.png":"tfwV","../assets/water_3.png":"d2j2","../assets/water_4.png":"gZbf"}],"P38Z":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Body=void 0;var n=function(){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t(this,e),this.pos={x:0,y:0},this.size={x:0,y:0},this.pos.x=i,this.pos.y=n,this.size.x=s,this.size.y=o}return i(e,[{key:"t",get:function(){return this.pos.y}},{key:"l",get:function(){return this.pos.x}},{key:"b",get:function(){return this.pos.y+this.size.y}},{key:"r",get:function(){return this.pos.x+this.size.x}},{key:"center",get:function(){return{x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2}}}]),e}();exports.Body=n;
},{}],"yBDh":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=l();return function(){var r,n=s(t);if(e){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}function i(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?f(e):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Block=void 0;var a=require("../constants"),y=require("../utils"),p=require("./Body"),b=function(t){o(c,p.Body);var r=u(c);function c(t,n,o){var u;return e(this,c),(u=r.call(this,t*a.BLOCK_SIZE,n*a.BLOCK_SIZE,a.BLOCK_SIZE,a.BLOCK_SIZE)).x=t,u.y=n,u.type=o,u}return n(c,[{key:"render",value:function(){y.renderBlock(this.type,this.x,this.y)}},{key:"isWalkable",get:function(){switch(this.type){case a.BlockType.Tree:return!0;default:return!1}}},{key:"isDamagable",get:function(){switch(this.type){case a.BlockType.Brick:return!0;default:return!1}}},{key:"isSolid",get:function(){switch(this.type){case a.BlockType.Brick:case a.BlockType.Steel:return!0;default:return!1}}}]),c}();exports.Block=b;
},{"../constants":"eKDL","../utils":"UnXq","./Body":"P38Z"}],"UnXq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.blocksinCluster=exports.buildCluster=exports.renderCluster=exports.renderBlock=exports.bodyIsVisible=exports.bodyInBounds=exports.blockIndexInBounds=exports.snapValue=exports.AABBIntersects=void 0;var e=require("./constants"),r=require("./gameplay/Block"),t=require("./gameplay/GameManager"),a=require("./preload"),o=2*e.BLOCK_SIZE;function n(e,r){return!(e.l>=r.r||r.l>=e.r||e.t>=r.b||r.t>=e.b)}function s(e){return Math.round(e/o)*o}function S(e,r){return e>=0&&e<52&&r>=0&&r<52}function c(r){return r.l>=0&&r.t>=0&&r.b<=e.CANVAS_HEIGHT&&r.r<=e.CANVAS_WIDTH}function I(r){return r.l<e.CANVAS_WIDTH&&r.r>0&&r.t<e.CANVAS_HEIGHT&&r.b>0}function E(r,o,n){var s=n%2*2+o%2;switch(r){case e.BlockType.Brick:t.gameManager.ctx.drawImage(a.SPRITES["brick_".concat(s+1)].img,o*e.BLOCK_SIZE,n*e.BLOCK_SIZE);break;case e.BlockType.Steel:t.gameManager.ctx.drawImage(a.SPRITES["stone_".concat(s+1)].img,o*e.BLOCK_SIZE,n*e.BLOCK_SIZE);break;case e.BlockType.Tree:t.gameManager.ctx.drawImage(a.SPRITES["tree_".concat(s+1)].img,o*e.BLOCK_SIZE,n*e.BLOCK_SIZE);break;case e.BlockType.Water:t.gameManager.ctx.drawImage(a.SPRITES["water_".concat(s+1)].img,o*e.BLOCK_SIZE,n*e.BLOCK_SIZE);break;default:t.gameManager.ctx.fillStyle="pink",t.gameManager.ctx.fillRect(o*e.BLOCK_SIZE,n*e.BLOCK_SIZE,e.BLOCK_SIZE,e.BLOCK_SIZE)}}function l(r,t,a){for(var o=t*e.CLUSTER_SIZE,n=a*e.CLUSTER_SIZE,s=0;s<e.CLUSTER_SIZE;s++)for(var S=0;S<e.CLUSTER_SIZE;S++)E(r,o+S,n+s)}function u(a,o,n){for(var s=0;s<e.CLUSTER_SIZE;s++)for(var S=0;S<e.CLUSTER_SIZE;S++){var c=o*e.CLUSTER_SIZE+S,I=n*e.CLUSTER_SIZE+s;t.gameManager.blocks[I][c]=new r.Block(c,I,a)}}function C(r,a){for(var o=[],n=0;n<e.CLUSTER_SIZE;n++)for(var s=0;s<e.CLUSTER_SIZE;s++){var S=r*e.CLUSTER_SIZE+s,c=a*e.CLUSTER_SIZE+n,I=t.gameManager.blocks[c][S];I&&o.push(I)}return o}exports.AABBIntersects=n,exports.snapValue=s,exports.blockIndexInBounds=S,exports.bodyInBounds=c,exports.bodyIsVisible=I,exports.renderBlock=E,exports.renderCluster=l,exports.buildCluster=u,exports.blocksinCluster=C;
},{"./constants":"eKDL","./gameplay/Block":"yBDh","./gameplay/GameManager":"T1jS","./preload":"mKv2"}],"T1jS":[function(require,module,exports) {
"use strict";function e(e,a){return n(e)||r(e,a)||o(e,a)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){a=!0,o=u}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}}function n(e){if(Array.isArray(e))return e}function a(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){u=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(u)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.gameManager=exports.GameManager=void 0;var c=require("../constants"),f=require("../utils"),y=require("./Tank"),d=document.createElement("canvas");document.body.appendChild(d),d.width=c.CANVAS_WIDTH,d.height=c.CANVAS_HEIGHT;var v=function(){function t(e){l(this,t),this.mode=c.GLOBAL_MODE.EDIT_TEST_LEVEL,this.player1=null,this.blocks=[],this.bullets=[],this.debugLevel=[],this.canvas=e,this.ctx=e.getContext("2d"),this.restoreDebugLevelData()}return s(t,[{key:"setMode",value:function(e){switch(this.mode=e,this.mode){case c.GLOBAL_MODE.DEBUG_TEST_LEVEL:this.buildDebugLevel(),this.player1=new y.Tank(0,0)}}},{key:"restoreDebugLevelData",value:function(){var e=localStorage.getItem("debugLevel");if(e)try{this.debugLevel=JSON.parse(e)}catch(t){}this.debugLevel.length||(this.debugLevel=new Array(52/c.CLUSTER_SIZE).fill(null).map(function(){return new Array(52/c.CLUSTER_SIZE).fill(null)}))}},{key:"buildDebugLevel",value:function(){var t,r=a(this.debugLevel.entries());try{for(r.s();!(t=r.n()).done;){var n,o=e(t.value,2),i=o[0],l=a(o[1].entries());try{for(l.s();!(n=l.n()).done;){var u=e(n.value,2),s=u[0],c=u[1];null!==c&&f.buildCluster(c,s,i)}}catch(y){l.e(y)}finally{l.f()}}}catch(y){r.e(y)}finally{r.f()}}}]),t}();exports.GameManager=v;var h=new v(d);exports.gameManager=h,window.gameManager=h;
},{"../constants":"eKDL","../utils":"UnXq","./Tank":"aGzu"}],"ystA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.keysPressed=void 0;var e=require("./constants"),s=require("./gameplay/GameManager");exports.keysPressed={},window.addEventListener("keypress",function(r){switch(r.key){case"1":s.gameManager.setMode(e.GLOBAL_MODE.NORMAL_GAME);break;case"2":s.gameManager.setMode(e.GLOBAL_MODE.DEBUG_TEST_LEVEL);break;case"3":s.gameManager.setMode(e.GLOBAL_MODE.EDIT_TEST_LEVEL)}}),window.addEventListener("keydown",function(e){exports.keysPressed[e.code]=!0}),window.addEventListener("keyup",function(e){exports.keysPressed[e.code]=!1});
},{"./constants":"eKDL","./gameplay/GameManager":"T1jS"}],"BtFj":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw i}}}}function r(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=y();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?f(e):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Bullet=void 0;var p=require("../constants"),b=require("../utils"),E=require("./Body"),I=require("./GameManager"),S=function(t){c(n,E.Body);var r=u(n);function n(t,e,a){var i;return o(this,n),(i=r.call(this,t,e,p.BULLET_SIZE,p.BULLET_SIZE)).dir=p.DIR.NONE,i.dir=a,i}return i(n,[{key:"update",value:function(){switch(this.dir){case p.DIR.LEFT:this.pos.x-=p.BULLET_SPEED;break;case p.DIR.UP:this.pos.y-=p.BULLET_SPEED;break;case p.DIR.RIGHT:this.pos.x+=p.BULLET_SPEED;break;case p.DIR.DOWN:this.pos.y+=p.BULLET_SPEED}var t=this.hitBlocks();if(t.length){var r,n=!1,o=e(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;a.isSolid&&(n=!0),a.isDamagable&&(I.gameManager.blocks[a.y][a.x]=null,n=!0)}}catch(i){o.e(i)}finally{o.f()}n&&I.gameManager.bullets.splice(I.gameManager.bullets.indexOf(this),1)}b.bodyIsVisible(this)||I.gameManager.bullets.splice(I.gameManager.bullets.indexOf(this),1)}},{key:"render",value:function(){I.gameManager.ctx.fillStyle="#fff",I.gameManager.ctx.fillRect(this.pos.x,this.pos.y,p.BULLET_SIZE,p.BULLET_SIZE)}},{key:"hitBlocks",value:function(){var t,e,r,n,o=[];return this.dir===p.DIR.NONE?o:(this.dir===p.DIR.LEFT||this.dir===p.DIR.RIGHT?(t={x:Math.floor(this.center.x/p.BLOCK_SIZE),y:Math.floor((this.center.y+.5*p.BLOCK_SIZE)/p.BLOCK_SIZE)},e={x:Math.floor(this.center.x/p.BLOCK_SIZE),y:Math.floor((this.center.y-.5*p.BLOCK_SIZE)/p.BLOCK_SIZE)},r={x:Math.floor(this.center.x/p.BLOCK_SIZE),y:Math.floor((this.center.y+1.5*p.BLOCK_SIZE)/p.BLOCK_SIZE)},n={x:Math.floor(this.center.x/p.BLOCK_SIZE),y:Math.floor((this.center.y-1.5*p.BLOCK_SIZE)/p.BLOCK_SIZE)}):(t={x:Math.floor((this.center.x+.5*p.BLOCK_SIZE)/p.BLOCK_SIZE),y:Math.floor(this.center.y/p.BLOCK_SIZE)},e={x:Math.floor((this.center.x-.5*p.BLOCK_SIZE)/p.BLOCK_SIZE),y:Math.floor(this.center.y/p.BLOCK_SIZE)},r={x:Math.floor((this.center.x+1.5*p.BLOCK_SIZE)/p.BLOCK_SIZE),y:Math.floor(this.center.y/p.BLOCK_SIZE)},n={x:Math.floor((this.center.x-1.5*p.BLOCK_SIZE)/p.BLOCK_SIZE),y:Math.floor(this.center.y/p.BLOCK_SIZE)}),b.blockIndexInBounds(t.x,t.y)&&I.gameManager.blocks[t.y][t.x]&&(o.push(I.gameManager.blocks[t.y][t.x]),b.blockIndexInBounds(r.x,r.y)&&I.gameManager.blocks[r.y][r.x]&&o.push(I.gameManager.blocks[r.y][r.x])),b.blockIndexInBounds(e.x,e.y)&&I.gameManager.blocks[e.y][e.x]&&(o.push(I.gameManager.blocks[e.y][e.x]),b.blockIndexInBounds(n.x,n.y)&&I.gameManager.blocks[n.y][n.x]&&o.push(I.gameManager.blocks[n.y][n.x])),o)}}]),n}();exports.Bullet=S;
},{"../constants":"eKDL","../utils":"UnXq","./Body":"P38Z","./GameManager":"T1jS"}],"aGzu":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}function r(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=y();return function(){var r,n=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?f(e):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tank=void 0;var h=require("../constants"),v=require("../keyboard"),b=require("../preload"),d=require("../utils"),g=require("./Body"),m=require("./Bullet"),S=require("./GameManager"),E=function(t){s(n,g.Body);var r=c(n);function n(t,e){var a;return o(this,n),(a=r.call(this,t,e,h.TANK_WIDTH,h.TANK_HEIGHT)).dir=h.DIR.RIGHT,a.lastShot=0,a}return i(n,[{key:"update",value:function(){var t={x:this.pos.x,y:this.pos.y},e=h.DIR.NONE;v.keysPressed[h.KEYS.LEFT]?(t.x-=h.MOVE_STEP,this.pos.y=t.y=d.snapValue(this.pos.y),e=h.DIR.LEFT):v.keysPressed[h.KEYS.RIGHT]?(t.x+=h.MOVE_STEP,this.pos.y=t.y=d.snapValue(this.pos.y),e=h.DIR.RIGHT):v.keysPressed[h.KEYS.UP]?(t.y-=h.MOVE_STEP,this.pos.x=t.x=d.snapValue(this.pos.x),e=h.DIR.UP):v.keysPressed[h.KEYS.DOWN]&&(t.y+=h.MOVE_STEP,this.pos.x=t.x=d.snapValue(this.pos.x),e=h.DIR.DOWN),e!==h.DIR.NONE&&(this.dir=e,this.move(t)&&(this.pos=t)),(!this.lastShot||Date.now()-this.lastShot>=h.SHOOT_COLDOWN)&&v.keysPressed[h.KEYS.SHOOT]&&this.shoot()}},{key:"render",value:function(){var t=this.pos.x+this.size.x/2,e=this.pos.y+this.size.y/2;S.gameManager.ctx.save(),S.gameManager.ctx.translate(t,e),S.gameManager.ctx.rotate(Math.PI/2*this.dir),S.gameManager.ctx.translate(-t,-e),S.gameManager.ctx.drawImage(b.SPRITES.player_1.img,this.pos.x,this.pos.y),S.gameManager.ctx.restore()}},{key:"move",value:function(t){var r=new g.Body(t.x,t.y,h.TANK_WIDTH,h.TANK_WIDTH);if(!d.bodyInBounds(r))return!1;var n,o=e(this.overlappingBlocks(r));try{for(o.s();!(n=o.n()).done;){if(!n.value.isWalkable)return console.log("cant walk"),!1}}catch(a){o.e(a)}finally{o.f()}return!0}},{key:"shoot",value:function(){S.gameManager.bullets.push(new m.Bullet(this.center.x-h.BULLET_SIZE/2,this.center.y-h.BULLET_SIZE/2,this.dir)),this.lastShot=Date.now()}},{key:"overlappingBlocks",value:function(t){for(var r=[],n=h.BLOCK_SIZE*h.CLUSTER_SIZE,o=Math.floor(t.l/n),a=Math.ceil(t.r/n),i=Math.floor(t.t/n),s=Math.ceil(t.b/n),u=i;u<s;u++)for(var c=o;c<a;c++){var l,f=e(d.blocksinCluster(c,u));try{for(f.s();!(l=f.n()).done;){var y=l.value;r.push(y)}}catch(p){f.e(p)}finally{f.f()}}return console.log(o,a),console.log(i,s),r}}]),n}();exports.Tank=E;
},{"../constants":"eKDL","../keyboard":"ystA","../preload":"mKv2","../utils":"UnXq","./Body":"P38Z","./Bullet":"BtFj","./GameManager":"T1jS"}],"GiMC":[function(require,module,exports) {
"use strict";function e(e,a){return n(e)||r(e,a)||o(e,a)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(u){a=!0,o=u}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}}function n(e){if(Array.isArray(e))return e}function a(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,l=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw l}}}}function o(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.levelEditor=exports.LevelEditor=void 0;var s=require("./constants"),f=require("./gameplay/GameManager"),g=require("./utils"),v=document.querySelectorAll("#level-editor"),m=document.querySelectorAll(".pallete__color"),y={activePaletteColor:"pallete__color--active"},d={empty:null,brick:s.BlockType.Brick,stone:s.BlockType.Steel,tree:s.BlockType.Tree,water:s.BlockType.Water},h=s.BLOCK_SIZE*s.CLUSTER_SIZE,b=function(){function t(){var e=this;i(this,t),this.brush=null,this.hl=null,this.mousePressed=!1,m.forEach(function(t){t.addEventListener("click",function(r){var n=t.dataset.colorValue;if(n){var a=d[n];e.setBrush(a),m.forEach(function(e){e.classList.remove(y.activePaletteColor)}),t.classList.add(y.activePaletteColor)}})}),f.gameManager.canvas.addEventListener("mousemove",function(t){var r=Math.floor(t.offsetX/h),n=Math.floor(t.offsetY/h);r>=0&&r<52/s.CLUSTER_SIZE&&n>=0&&n<52/s.CLUSTER_SIZE?(e.setHL({x:r,y:n}),e.mousePressed&&e.paintCell({x:r,y:n})):e.setHL(null)}),f.gameManager.canvas.addEventListener("mouseleave",function(){e.setHL(null)}),f.gameManager.canvas.addEventListener("mousedown",function(t){e.mousePressed=!0;var r=Math.floor(t.offsetX/h),n=Math.floor(t.offsetY/h);r>=0&&r<52/s.CLUSTER_SIZE&&n>=0&&n<52/s.CLUSTER_SIZE&&e.paintCell({x:r,y:n})}),f.gameManager.canvas.addEventListener("mouseup",function(){e.mousePressed=!1})}return c(t,[{key:"render",value:function(){f.gameManager.ctx.fillStyle="#000",f.gameManager.ctx.fillRect(0,0,s.CANVAS_WIDTH,s.CANVAS_HEIGHT);for(var t=s.BLOCK_SIZE*s.CLUSTER_SIZE,r=0;r<Math.floor(s.CANVAS_WIDTH/t);r++)f.gameManager.ctx.strokeStyle="#222",f.gameManager.ctx.lineWidth=1,f.gameManager.ctx.beginPath(),f.gameManager.ctx.moveTo(r*t,0),f.gameManager.ctx.lineTo(r*t,s.CANVAS_HEIGHT),f.gameManager.ctx.closePath(),f.gameManager.ctx.stroke(),f.gameManager.ctx.beginPath(),f.gameManager.ctx.moveTo(0,r*t),f.gameManager.ctx.lineTo(s.CANVAS_WIDTH,r*t),f.gameManager.ctx.closePath(),f.gameManager.ctx.stroke();var n,o=a(f.gameManager.debugLevel.entries());try{for(o.s();!(n=o.n()).done;){var l,i=e(n.value,2),u=i[0],c=a(i[1].entries());try{for(c.s();!(l=c.n()).done;){var v=e(l.value,2),m=v[0],y=v[1];null!==y&&g.renderCluster(y,m,u)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}this.hl&&(f.gameManager.ctx.strokeStyle="rgba(255,255,255,1)",f.gameManager.ctx.lineWidth=2,f.gameManager.ctx.strokeRect(this.hl.x*h,this.hl.y*h,h,h))}},{key:"setBrush",value:function(e){this.brush=e}},{key:"setHL",value:function(e){this.hl=e}},{key:"paintCell",value:function(e){f.gameManager.debugLevel[e.y][e.x]=this.brush,this.save()}},{key:"save",value:function(){localStorage.setItem("debugLevel",JSON.stringify(f.gameManager.debugLevel))}}]),t}();exports.LevelEditor=b;var S=new b;exports.levelEditor=S,window.levelEditor=S;
},{"./constants":"eKDL","./gameplay/GameManager":"T1jS","./utils":"UnXq"}],"ZCfc":[function(require,module,exports) {
"use strict";function e(e,n){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=r(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var t=0,l=function(){};return{s:l,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}function r(e,r){if(e){if("string"==typeof e)return n(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,r):void 0}}function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}Object.defineProperty(exports,"__esModule",{value:!0});var a=require("./constants"),t=require("./preload"),l=require("./gameplay/Tank"),o=require("./gameplay/GameManager"),i=require("./level-editor");function u(){var r;null===(r=o.gameManager.player1)||void 0===r||r.update();var n,a=e(o.gameManager.bullets);try{for(a.s();!(n=a.n()).done;){n.value.update()}}catch(t){a.e(t)}finally{a.f()}}function c(){var r;o.gameManager.ctx.fillStyle="#000",o.gameManager.ctx.fillRect(0,0,a.CANVAS_WIDTH,a.CANVAS_HEIGHT),null===(r=o.gameManager.player1)||void 0===r||r.render();var n,t=e(o.gameManager.bullets);try{for(t.s();!(n=t.n()).done;){n.value.render()}}catch(g){t.e(g)}finally{t.f()}var l,i=e(o.gameManager.blocks);try{for(i.s();!(l=i.n()).done;){var u,c=e(l.value);try{for(c.s();!(u=c.n()).done;){var f=u.value;f&&f.render()}}catch(g){c.e(g)}finally{c.f()}}}catch(g){i.e(g)}finally{i.f()}}function f(){switch(o.gameManager.mode){case a.GLOBAL_MODE.NORMAL_GAME:o.gameManager.ctx.fillStyle="pink",o.gameManager.ctx.fillRect(0,0,a.CANVAS_WIDTH,a.CANVAS_HEIGHT);break;case a.GLOBAL_MODE.DEBUG_TEST_LEVEL:u(),c();break;case a.GLOBAL_MODE.EDIT_TEST_LEVEL:i.levelEditor.render()}window.setTimeout(f,1e3/60)}o.gameManager.player1=new l.Tank(0,0),o.gameManager.blocks=new Array(52).fill(null).map(function(){return new Array(52).fill(null)}),o.gameManager.bullets=[],t.preloadAssets().then(f);
},{"./constants":"eKDL","./preload":"mKv2","./gameplay/Tank":"aGzu","./gameplay/GameManager":"T1jS","./level-editor":"GiMC"}]},{},["ZCfc"], null)
//# sourceMappingURL=/main.1dd156a5.js.map