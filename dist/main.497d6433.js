parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"eKDL":[function(require,module,exports) {
"use strict";var e,E,r;Object.defineProperty(exports,"__esModule",{value:!0}),exports.KEYS=exports.BlockType=exports.DIR=exports.SHOOT_COLDOWN=exports.TANK_HEIGHT=exports.TANK_WIDTH=exports.BULLET_SPEED=exports.BULLET_SIZE=exports.CLUSTER_SIZE=exports.BLOCK_SIZE=exports.CANVAS_HEIGHT=exports.CANVAS_WIDTH=exports.MOVE_STEP=exports.GLOBAL_MODE=void 0,function(e){e[e.NORMAL_GAME=0]="NORMAL_GAME",e[e.DEBUG_TEST_LEVEL=1]="DEBUG_TEST_LEVEL",e[e.EDIT_TEST_LEVEL=2]="EDIT_TEST_LEVEL"}(e=exports.GLOBAL_MODE||(exports.GLOBAL_MODE={})),exports.MOVE_STEP=2,exports.CANVAS_WIDTH=416,exports.CANVAS_HEIGHT=416,exports.BLOCK_SIZE=8,exports.CLUSTER_SIZE=2,exports.BULLET_SIZE=8,exports.BULLET_SPEED=4,exports.TANK_WIDTH=32,exports.TANK_HEIGHT=32,exports.SHOOT_COLDOWN=200,function(e){e[e.NONE=-1]="NONE",e[e.UP=0]="UP",e[e.RIGHT=1]="RIGHT",e[e.DOWN=2]="DOWN",e[e.LEFT=3]="LEFT"}(E=exports.DIR||(exports.DIR={})),function(e){e[e.Brick=0]="Brick",e[e.Steel=1]="Steel",e[e.Tree=2]="Tree",e[e.Water=3]="Water"}(r=exports.BlockType||(exports.BlockType={})),exports.KEYS={LEFT:"ArrowLeft",RIGHT:"ArrowRight",UP:"ArrowUp",DOWN:"ArrowDown",SHOOT:"Space"};
},{}],"dCQQ":[function(require,module,exports) {
module.exports="player_1.1f7fb568.png";
},{}],"bmcx":[function(require,module,exports) {
module.exports="brick_1.be1c0ae5.png";
},{}],"RX5K":[function(require,module,exports) {
module.exports="brick_2.f05c2e8e.png";
},{}],"QeYO":[function(require,module,exports) {
module.exports="brick_3.74ff3ca7.png";
},{}],"LyXN":[function(require,module,exports) {
module.exports="brick_4.f66ef00f.png";
},{}],"NvEq":[function(require,module,exports) {
module.exports="stone_1.f03e93d4.png";
},{}],"ohDj":[function(require,module,exports) {
module.exports="stone_2.3893dc34.png";
},{}],"UHSI":[function(require,module,exports) {
module.exports="stone_3.b4ec65b3.png";
},{}],"aEhS":[function(require,module,exports) {
module.exports="stone_4.3d143e42.png";
},{}],"z74z":[function(require,module,exports) {
module.exports="tree_1.534d40ec.png";
},{}],"NP97":[function(require,module,exports) {
module.exports="tree_2.89cd28fd.png";
},{}],"rv7i":[function(require,module,exports) {
module.exports="tree_3.2eb36ea7.png";
},{}],"LaAz":[function(require,module,exports) {
module.exports="tree_4.4d528f97.png";
},{}],"wCHH":[function(require,module,exports) {
module.exports="base.d7f557e0.png";
},{}],"FVPW":[function(require,module,exports) {
module.exports="base_destroyed.854264fe.png";
},{}],"g4QA":[function(require,module,exports) {
module.exports="water_1.7aa1d1a3.png";
},{}],"tfwV":[function(require,module,exports) {
module.exports="water_2.d19bddb6.png";
},{}],"d2j2":[function(require,module,exports) {
module.exports="water_3.04cad805.png";
},{}],"gZbf":[function(require,module,exports) {
module.exports="water_4.7fd1f7e3.png";
},{}],"D849":[function(require,module,exports) {
module.exports="ai_tank_1.bb78925a.png";
},{}],"GFJn":[function(require,module,exports) {
module.exports="ai_tank_2.465549a0.png";
},{}],"YqDt":[function(require,module,exports) {
module.exports="ai_tank_3.45aaf588.png";
},{}],"TbI7":[function(require,module,exports) {
module.exports="ai_tank_4.7471627d.png";
},{}],"BAHn":[function(require,module,exports) {
module.exports="ai_tank_5.ba35eb9c.png";
},{}],"zwPh":[function(require,module,exports) {
module.exports="ai_tank_6.c15f810d.png";
},{}],"C4aX":[function(require,module,exports) {
module.exports="ai_tank_7.024e745b.png";
},{}],"bPUL":[function(require,module,exports) {
module.exports="explosion_small_1.92aa7d80.png";
},{}],"b4LR":[function(require,module,exports) {
module.exports="explosion_small_2.78a59195.png";
},{}],"AdcO":[function(require,module,exports) {
module.exports="explosion_small_3.fec183c9.png";
},{}],"V3N7":[function(require,module,exports) {
module.exports="explosion_big_1.1c447c65.png";
},{}],"YaDI":[function(require,module,exports) {
module.exports="explosion_big_2.c1e8d012.png";
},{}],"mKv2":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.preloadAssets=exports.SPRITES=void 0;var s=e(require("../assets/player_1.png")),t=e(require("../assets/brick_1.png")),a=e(require("../assets/brick_2.png")),r=e(require("../assets/brick_3.png")),i=e(require("../assets/brick_4.png")),l=e(require("../assets/stone_1.png")),_=e(require("../assets/stone_2.png")),n=e(require("../assets/stone_3.png")),u=e(require("../assets/stone_4.png")),f=e(require("../assets/tree_1.png")),p=e(require("../assets/tree_2.png")),o=e(require("../assets/tree_3.png")),d=e(require("../assets/tree_4.png")),g=e(require("../assets/base.png")),q=e(require("../assets/base_destroyed.png")),k=e(require("../assets/water_1.png")),b=e(require("../assets/water_2.png")),x=e(require("../assets/water_3.png")),c=e(require("../assets/water_4.png")),m=e(require("../assets/ai_tank_1.png")),w=e(require("../assets/ai_tank_2.png")),S=e(require("../assets/ai_tank_3.png")),P=e(require("../assets/ai_tank_4.png")),v=e(require("../assets/ai_tank_5.png")),y=e(require("../assets/ai_tank_6.png")),I=e(require("../assets/ai_tank_7.png")),E=e(require("../assets/explosion_small_1.png")),R=e(require("../assets/explosion_small_2.png")),T=e(require("../assets/explosion_small_3.png")),h=e(require("../assets/explosion_big_1.png")),j=e(require("../assets/explosion_big_2.png"));function A(){var e=Object.keys(exports.SPRITES).map(function(e){return new Promise(function(s){var t=new Image;t.onload=function(){exports.SPRITES[e].img=t,s()},t.src=exports.SPRITES[e].file})});return Promise.all(e)}exports.SPRITES={player_1:{file:s.default},brick_1:{file:t.default},brick_2:{file:a.default},brick_3:{file:r.default},brick_4:{file:i.default},stone_1:{file:l.default},stone_2:{file:_.default},stone_3:{file:n.default},stone_4:{file:u.default},tree_1:{file:f.default},tree_2:{file:p.default},tree_3:{file:o.default},tree_4:{file:d.default},water_1:{file:k.default},water_2:{file:b.default},water_3:{file:x.default},water_4:{file:c.default},ai_tank_1:{file:m.default},ai_tank_2:{file:w.default},ai_tank_3:{file:S.default},ai_tank_4:{file:P.default},ai_tank_5:{file:v.default},ai_tank_6:{file:y.default},ai_tank_7:{file:I.default},base:{file:g.default},base_destroyed:{file:q.default},explosion_small_1:{file:E.default},explosion_small_2:{file:R.default},explosion_small_3:{file:T.default},explosion_big_1:{file:h.default},explosion_big_2:{file:j.default}},exports.preloadAssets=A;
},{"../assets/player_1.png":"dCQQ","../assets/brick_1.png":"bmcx","../assets/brick_2.png":"RX5K","../assets/brick_3.png":"QeYO","../assets/brick_4.png":"LyXN","../assets/stone_1.png":"NvEq","../assets/stone_2.png":"ohDj","../assets/stone_3.png":"UHSI","../assets/stone_4.png":"aEhS","../assets/tree_1.png":"z74z","../assets/tree_2.png":"NP97","../assets/tree_3.png":"rv7i","../assets/tree_4.png":"LaAz","../assets/base.png":"wCHH","../assets/base_destroyed.png":"FVPW","../assets/water_1.png":"g4QA","../assets/water_2.png":"tfwV","../assets/water_3.png":"d2j2","../assets/water_4.png":"gZbf","../assets/ai_tank_1.png":"D849","../assets/ai_tank_2.png":"GFJn","../assets/ai_tank_3.png":"YqDt","../assets/ai_tank_4.png":"TbI7","../assets/ai_tank_5.png":"BAHn","../assets/ai_tank_6.png":"zwPh","../assets/ai_tank_7.png":"C4aX","../assets/explosion_small_1.png":"bPUL","../assets/explosion_small_2.png":"b4LR","../assets/explosion_small_3.png":"AdcO","../assets/explosion_big_1.png":"V3N7","../assets/explosion_big_2.png":"YaDI"}],"P38Z":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Body=void 0;var n=function(){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t(this,e),this.pos={x:0,y:0},this.size={x:0,y:0},this.pos.x=i,this.pos.y=n,this.size.x=s,this.size.y=o}return i(e,[{key:"t",get:function(){return this.pos.y}},{key:"l",get:function(){return this.pos.x}},{key:"b",get:function(){return this.pos.y+this.size.y}},{key:"r",get:function(){return this.pos.x+this.size.x}},{key:"center",get:function(){return{x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2}}}]),e}();exports.Body=n;
},{}],"yBDh":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=l();return function(){var r,n=s(t);if(e){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}function i(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?f(e):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Block=void 0;var a=require("../constants"),y=require("../utils"),p=require("./Body"),b=function(t){o(c,p.Body);var r=u(c);function c(t,n,o){var u;return e(this,c),(u=r.call(this,t*a.BLOCK_SIZE,n*a.BLOCK_SIZE,a.BLOCK_SIZE,a.BLOCK_SIZE)).x=t,u.y=n,u.type=o,u}return n(c,[{key:"render",value:function(){y.renderBlock(this.type,this.x,this.y)}},{key:"isWalkable",get:function(){switch(this.type){case a.BlockType.Tree:return!0;default:return!1}}},{key:"isDamagable",get:function(){switch(this.type){case a.BlockType.Brick:return!0;default:return!1}}},{key:"isSolid",get:function(){switch(this.type){case a.BlockType.Brick:case a.BlockType.Steel:return!0;default:return!1}}}]),c}();exports.Block=b;
},{"../constants":"eKDL","../utils":"UnXq","./Body":"P38Z"}],"UnXq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomInt=exports.blocksinCluster=exports.buildCluster=exports.renderCluster=exports.renderBlock=exports.bodyIsVisible=exports.bodyInBounds=exports.blockIndexInBounds=exports.snapValue=exports.AABBIntersects=void 0;var e=require("./constants"),r=require("./gameplay/Block"),t=require("./gameplay/GameManager"),o=require("./preload"),a=2*e.BLOCK_SIZE;function n(e,r){return!(e.r<=r.l||e.l>=r.r||e.t>=r.b||e.b<=r.t)}function s(e){return Math.round(e/a)*a}function c(e,r){return e>=0&&e<52&&r>=0&&r<52}function S(r){return r.l>=0&&r.t>=0&&r.b<=e.CANVAS_HEIGHT&&r.r<=e.CANVAS_WIDTH}function I(r){return r.l<e.CANVAS_WIDTH&&r.r>0&&r.t<e.CANVAS_HEIGHT&&r.b>0}function l(r,a,n){var s=n%2*2+a%2;switch(r){case e.BlockType.Brick:t.gameManager.ctx.drawImage(o.SPRITES["brick_".concat(s+1)].img,a*e.BLOCK_SIZE,n*e.BLOCK_SIZE);break;case e.BlockType.Steel:t.gameManager.ctx.drawImage(o.SPRITES["stone_".concat(s+1)].img,a*e.BLOCK_SIZE,n*e.BLOCK_SIZE);break;case e.BlockType.Tree:t.gameManager.ctx.drawImage(o.SPRITES["tree_".concat(s+1)].img,a*e.BLOCK_SIZE,n*e.BLOCK_SIZE);break;case e.BlockType.Water:t.gameManager.ctx.drawImage(o.SPRITES["water_".concat(s+1)].img,a*e.BLOCK_SIZE,n*e.BLOCK_SIZE);break;default:t.gameManager.ctx.fillStyle="pink",t.gameManager.ctx.fillRect(a*e.BLOCK_SIZE,n*e.BLOCK_SIZE,e.BLOCK_SIZE,e.BLOCK_SIZE)}}function E(r,t,o){for(var a=t*e.CLUSTER_SIZE,n=o*e.CLUSTER_SIZE,s=0;s<e.CLUSTER_SIZE;s++)for(var c=0;c<e.CLUSTER_SIZE;c++)l(r,a+c,n+s)}function u(t,o,a,n){for(var s=0;s<e.CLUSTER_SIZE;s++)for(var c=0;c<e.CLUSTER_SIZE;c++){var S=a*e.CLUSTER_SIZE+c,I=n*e.CLUSTER_SIZE+s;t.blocks[I][S]=new r.Block(S,I,o)}}function i(r,o){for(var a=[],n=0;n<e.CLUSTER_SIZE;n++)for(var s=0;s<e.CLUSTER_SIZE;s++){var c=r*e.CLUSTER_SIZE+s,S=o*e.CLUSTER_SIZE+n,I=t.gameManager.blocks[S][c];I&&a.push(I)}return a}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;return e=Math.ceil(e),r=Math.floor(r),Math.floor(Math.random()*(r-e)+e)}exports.AABBIntersects=n,exports.snapValue=s,exports.blockIndexInBounds=c,exports.bodyInBounds=S,exports.bodyIsVisible=I,exports.renderBlock=l,exports.renderCluster=E,exports.buildCluster=u,exports.blocksinCluster=i,exports.randomInt=_;
},{"./constants":"eKDL","./gameplay/Block":"yBDh","./gameplay/GameManager":"T1jS","./preload":"mKv2"}],"Cqth":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=s();return function(){var r,n=a(t);if(e){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?f(e):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Base=void 0;var y=require("../constants"),l=require("../preload"),p=require("./Body"),b=require("./GameManager"),d=l.SPRITES.base,h=l.SPRITES.base_destroyed,v=function(t){o(u,p.Body);var r=i(u);function u(t,n){var o;return e(this,u),(o=r.call(this,t,n,y.TANK_WIDTH,y.TANK_HEIGHT)).isDestroyed=!1,o}return n(u,[{key:"render",value:function(){var t=this.isDestroyed?h:d;b.gameManager.ctx.drawImage(t.img,this.pos.x,this.pos.y)}},{key:"destroy",value:function(){this.isDestroyed=!0}}]),u}();exports.Base=v;
},{"../constants":"eKDL","../preload":"mKv2","./Body":"P38Z","./GameManager":"T1jS"}],"Bq5z":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t){var e=s();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExplosionBig=exports.ExplosionSmall=exports.Explosion=void 0;var l=require("../preload"),p=require("./GameManager"),y=100,h=200,m=function(){function t(e,n){u(this,t),this.startTime=0,this.x=e,this.y=n}return f(t,[{key:"render",value:function(){}},{key:"update",value:function(){}}]),t}();exports.Explosion=m;var x=function(t){e(o,m);var n=r(o);function o(t,e){var r;return u(this,o),(r=n.call(this,t,e)).sprites=[l.SPRITES.explosion_small_1,l.SPRITES.explosion_small_2,l.SPRITES.explosion_small_3],r.startTime=Date.now(),r}return f(o,[{key:"update",value:function(){Date.now()-this.startTime>5*y&&p.gameManager.removeExplosion(this)}},{key:"render",value:function(){p.gameManager.ctx.drawImage(this.sprites[this.spriteIndex].img,this.x-16,this.y-16)}},{key:"spriteIndex",get:function(){var t=Date.now();return t-this.startTime<y?0:t-this.startTime<2*y?1:t-this.startTime<3*y?2:t-this.startTime<4*y?1:0}}]),o}();exports.ExplosionSmall=x;var v=function(t){e(o,m);var n=r(o);function o(t,e){var r;return u(this,o),(r=n.call(this,t,e)).sprites=[l.SPRITES.explosion_big_1,l.SPRITES.explosion_big_2],r.startTime=Date.now(),r}return f(o,[{key:"update",value:function(){Date.now()-this.startTime>3*h&&p.gameManager.removeExplosion(this)}},{key:"render",value:function(){p.gameManager.ctx.drawImage(this.sprites[this.spriteIndex].img,this.x-32,this.y-32)}},{key:"spriteIndex",get:function(){var t=Date.now();return t-this.startTime<h?0:t-this.startTime<2*h?1:0}}]),o}();exports.ExplosionBig=v;
},{"../preload":"mKv2","./GameManager":"T1jS"}],"ystA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.keysPressed=void 0;var e=require("./constants"),s=require("./gameplay/GameManager");exports.keysPressed={},window.addEventListener("keypress",function(r){switch(r.key){case"1":s.gameManager.setMode(e.GLOBAL_MODE.NORMAL_GAME);break;case"2":s.gameManager.setMode(e.GLOBAL_MODE.DEBUG_TEST_LEVEL);break;case"3":s.gameManager.setMode(e.GLOBAL_MODE.EDIT_TEST_LEVEL)}}),window.addEventListener("keydown",function(e){exports.keysPressed[e.code]=!0}),window.addEventListener("keyup",function(e){exports.keysPressed[e.code]=!1});
},{"./constants":"eKDL","./gameplay/GameManager":"T1jS"}],"BtFj":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=y();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?f(t):r}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Bullet=void 0;var p=require("../constants"),b=require("../utils"),g=require("./Body"),E=require("./GameManager"),I=require("./Explosion"),B=function(e){s(n,g.Body);var r=l(n);function n(e,t,a,i){var s;return o(this,n),(s=r.call(this,t,a,p.BULLET_SIZE,p.BULLET_SIZE)).dir=p.DIR.NONE,s.destroy=!1,s.dir=i,s.tank=e,s}return i(n,[{key:"update",value:function(){var e=!1;switch(this.dir){case p.DIR.LEFT:this.pos.x-=p.BULLET_SPEED;break;case p.DIR.UP:this.pos.y-=p.BULLET_SPEED;break;case p.DIR.RIGHT:this.pos.x+=p.BULLET_SPEED;break;case p.DIR.DOWN:this.pos.y+=p.BULLET_SPEED}var r=this.hitBlocks();if(r.length){var n,o=!1,a=t(r);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.isSolid&&(o=!0),i.isDamagable&&(E.gameManager.blocks[i.y][i.x]=null,o=!0)}}catch(h){a.e(h)}finally{a.f()}o&&(e=!0)}else if(b.AABBIntersects(this,E.gameManager.base))E.gameManager.base.isDestroyed||(E.gameManager.base.destroy(),E.gameManager.explosions.push(new I.ExplosionBig(E.gameManager.base.center.x,E.gameManager.base.center.y)),e=!0);else{var s,c=t(E.gameManager.tanks);try{for(c.s();!(s=c.n()).done;){var l=s.value;l!==this.tank&&(this.tank.ai!==l.ai&&b.AABBIntersects(l,this)&&(e=!0,l.destroy=!0))}}catch(h){c.e(h)}finally{c.f()}var u,f=t(E.gameManager.bullets);try{for(f.s();!(u=f.n()).done;){var y=u.value;y.tank!==this.tank&&(y.tank.ai!==this.tank.ai&&b.AABBIntersects(y,this)&&(e=!0))}}catch(h){f.e(h)}finally{f.f()}}b.bodyIsVisible(this)||(e=!0),e&&(this.destroy=!0)}},{key:"render",value:function(){E.gameManager.ctx.fillStyle="#ff7e1f",E.gameManager.ctx.fillRect(this.pos.x,this.pos.y,p.BULLET_SIZE,p.BULLET_SIZE)}},{key:"hitBlocks",value:function(){var e,t,r,n,o=[];return this.dir===p.DIR.NONE?o:(this.dir===p.DIR.LEFT||this.dir===p.DIR.RIGHT?(e={x:Math.floor(this.center.x/p.BLOCK_SIZE),y:Math.floor((this.center.y+.5*p.BLOCK_SIZE)/p.BLOCK_SIZE)},t={x:Math.floor(this.center.x/p.BLOCK_SIZE),y:Math.floor((this.center.y-.5*p.BLOCK_SIZE)/p.BLOCK_SIZE)},r={x:Math.floor(this.center.x/p.BLOCK_SIZE),y:Math.floor((this.center.y+1.5*p.BLOCK_SIZE)/p.BLOCK_SIZE)},n={x:Math.floor(this.center.x/p.BLOCK_SIZE),y:Math.floor((this.center.y-1.5*p.BLOCK_SIZE)/p.BLOCK_SIZE)}):(e={x:Math.floor((this.center.x+.5*p.BLOCK_SIZE)/p.BLOCK_SIZE),y:Math.floor(this.center.y/p.BLOCK_SIZE)},t={x:Math.floor((this.center.x-.5*p.BLOCK_SIZE)/p.BLOCK_SIZE),y:Math.floor(this.center.y/p.BLOCK_SIZE)},r={x:Math.floor((this.center.x+1.5*p.BLOCK_SIZE)/p.BLOCK_SIZE),y:Math.floor(this.center.y/p.BLOCK_SIZE)},n={x:Math.floor((this.center.x-1.5*p.BLOCK_SIZE)/p.BLOCK_SIZE),y:Math.floor(this.center.y/p.BLOCK_SIZE)}),b.blockIndexInBounds(e.x,e.y)&&E.gameManager.blocks[e.y][e.x]&&(o.push(E.gameManager.blocks[e.y][e.x]),b.blockIndexInBounds(r.x,r.y)&&E.gameManager.blocks[r.y][r.x]&&o.push(E.gameManager.blocks[r.y][r.x])),b.blockIndexInBounds(t.x,t.y)&&E.gameManager.blocks[t.y][t.x]&&(o.push(E.gameManager.blocks[t.y][t.x]),b.blockIndexInBounds(n.x,n.y)&&E.gameManager.blocks[n.y][n.x]&&o.push(E.gameManager.blocks[n.y][n.x])),o)}}]),n}();exports.Bullet=B;
},{"../constants":"eKDL","../utils":"UnXq","./Body":"P38Z","./GameManager":"T1jS","./Explosion":"Bq5z"}],"aGzu":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function r(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var r,n=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?s(e):r}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tank=void 0;var h=require("../constants"),v=require("../utils"),b=require("./Body"),d=require("./Bullet"),g=require("./GameManager"),m=function(t){u(n,b.Body);var r=l(n);function n(t,e){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.DIR.RIGHT,u=arguments.length>3?arguments[3]:void 0;return o(this,n),(i=r.call(this,t,e,h.TANK_WIDTH,h.TANK_HEIGHT)).lastShot=0,i.bullet=null,i.destroy=!1,i.ai=!1,i.dir=a,i.sprite=u,i}return a(n,[{key:"setDir",value:function(t){this.dir=t}},{key:"update",value:function(){}},{key:"render",value:function(){if(this.sprite&&this.sprite.img){var t=this.pos.x+this.size.x/2,e=this.pos.y+this.size.y/2;g.gameManager.ctx.save(),g.gameManager.ctx.translate(t,e),g.gameManager.ctx.rotate(Math.PI/2*this.dir),g.gameManager.ctx.translate(-t,-e),g.gameManager.ctx.drawImage(this.sprite.img,this.pos.x,this.pos.y),g.gameManager.ctx.restore()}}},{key:"move",value:function(t){var r=new b.Body(t.x,t.y,h.TANK_WIDTH,h.TANK_WIDTH);if(!v.bodyInBounds(r))return!1;var n,o=e(this.overlappingBlocks(r));try{for(o.s();!(n=o.n()).done;){if(!n.value.isWalkable)return!1}}catch(c){o.e(c)}finally{o.f()}var i,a=e(g.gameManager.tanks);try{for(a.s();!(i=a.n()).done;){var u=i.value;if(u!==this&&v.AABBIntersects(u,r))return!1}}catch(c){a.e(c)}finally{a.f()}return!0}},{key:"shoot",value:function(){var t=new d.Bullet(this,this.center.x-h.BULLET_SIZE/2,this.center.y-h.BULLET_SIZE/2,this.dir);this.bullet=t,g.gameManager.bullets.push(t),this.lastShot=Date.now()}},{key:"overlappingBlocks",value:function(t){for(var r=[],n=h.BLOCK_SIZE*h.CLUSTER_SIZE,o=Math.floor(t.l/n),i=Math.ceil(t.r/n),a=Math.floor(t.t/n),u=Math.ceil(t.b/n),c=a;c<u;c++)for(var l=o;l<i;l++){var f,s=e(v.blocksinCluster(l,c));try{for(s.s();!(f=s.n()).done;){var y=f.value;r.push(y)}}catch(p){s.e(p)}finally{s.f()}}return r}}]),n}();exports.Tank=m;
},{"../constants":"eKDL","../utils":"UnXq","./Body":"P38Z","./Bullet":"BtFj","./GameManager":"T1jS"}],"xegc":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),t}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=a();return function(){var r,o=f(t);if(e){var n=f(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return u(this,r)}}function u(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?c(e):r}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlayerTank=void 0;var p=require("../constants"),y=require("../keyboard"),l=require("../preload"),h=require("../utils"),b=require("./Tank"),O=function(t){n(s,b.Tank);var r=i(s);function s(t,o,n){return e(this,s),r.call(this,t,o,n,l.SPRITES.player_1)}return o(s,[{key:"update",value:function(){this.pos.x,this.pos.y;var t={x:this.pos.x,y:this.pos.y},e=p.DIR.NONE;y.keysPressed[p.KEYS.LEFT]?(t.x-=p.MOVE_STEP,this.pos.y=t.y=h.snapValue(this.pos.y),e=p.DIR.LEFT):y.keysPressed[p.KEYS.RIGHT]?(t.x+=p.MOVE_STEP,this.pos.y=t.y=h.snapValue(this.pos.y),e=p.DIR.RIGHT):y.keysPressed[p.KEYS.UP]?(t.y-=p.MOVE_STEP,this.pos.x=t.x=h.snapValue(this.pos.x),e=p.DIR.UP):y.keysPressed[p.KEYS.DOWN]&&(t.y+=p.MOVE_STEP,this.pos.x=t.x=h.snapValue(this.pos.x),e=p.DIR.DOWN),e!==p.DIR.NONE&&(this.setDir(e),this.move(t)&&(this.pos=t)),!this.bullet&&(!this.lastShot||Date.now()-this.lastShot>=p.SHOOT_COLDOWN)&&y.keysPressed[p.KEYS.SHOOT]&&this.shoot()}}]),s}();exports.PlayerTank=O;
},{"../constants":"eKDL","../keyboard":"ystA","../preload":"mKv2","../utils":"UnXq","./Tank":"aGzu"}],"T1jS":[function(require,module,exports) {
"use strict";function e(e,i){return r(e)||n(e,i)||l(e,i)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,l=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,l=u}finally{try{r||null==o.return||o.return()}finally{if(i)throw l}}return n}}function r(e){if(Array.isArray(e))return e}function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function l(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.gameManager=exports.GameManager=void 0;var c=require("../constants"),f=require("../utils"),h=require("./Base"),y=require("./Explosion"),v=require("./PlayerTank"),b=document.createElement("canvas");document.body.appendChild(b),b.width=c.CANVAS_WIDTH,b.height=c.CANVAS_HEIGHT;var d=function(){function t(e){o(this,t),this.mode=c.GLOBAL_MODE.DEBUG_TEST_LEVEL,this.player1=null,this.tanks=[],this.blocks=new Array(52).fill(null).map(function(){return new Array(52).fill(null)}),this.bullets=[],this.explosions=[],this.debugLevel=[],this.canvas=e,this.ctx=e.getContext("2d"),this.base=new h.Base(192,386),this.restoreDebugLevelData(),this.buildDebugLevel()}return s(t,[{key:"setMode",value:function(e){switch(this.mode=e,this.mode){case c.GLOBAL_MODE.DEBUG_TEST_LEVEL:this.buildDebugLevel(),this.tanks=[],this.tanks.push(new v.PlayerTank(128,386,c.DIR.UP))}}},{key:"removeBullet",value:function(e){this.bullets.splice(this.bullets.indexOf(e),1),e.tank.bullet=null,this.explosions.push(new y.ExplosionSmall(e.center.x,e.center.y))}},{key:"removeExplosion",value:function(e){this.explosions.splice(this.explosions.indexOf(e),1)}},{key:"removeTank",value:function(e){this.tanks.splice(this.tanks.indexOf(e),1),this.explosions.push(new y.ExplosionBig(e.center.x,e.center.y)),e instanceof v.PlayerTank&&this.tanks.push(new v.PlayerTank(128,386,c.DIR.UP))}},{key:"resetDebugLevel",value:function(){this.debugLevel=new Array(52/c.CLUSTER_SIZE).fill(null).map(function(){return new Array(52/c.CLUSTER_SIZE).fill(null)}),this.saveDebugLevel()}},{key:"saveDebugLevel",value:function(){localStorage.setItem("debugLevel",JSON.stringify(this.debugLevel))}},{key:"restoreDebugLevelData",value:function(){var e=localStorage.getItem("debugLevel");if(e)try{this.debugLevel=JSON.parse(e)}catch(t){}this.debugLevel.length||(this.debugLevel=new Array(52/c.CLUSTER_SIZE).fill(null).map(function(){return new Array(52/c.CLUSTER_SIZE).fill(null)}))}},{key:"buildDebugLevel",value:function(){var t,n=i(this.debugLevel.entries());try{for(n.s();!(t=n.n()).done;){var r,l=e(t.value,2),a=l[0],o=i(l[1].entries());try{for(o.s();!(r=o.n()).done;){var u=e(r.value,2),s=u[0],c=u[1];null!==c&&f.buildCluster(this,c,s,a)}}catch(h){o.e(h)}finally{o.f()}}}catch(h){n.e(h)}finally{n.f()}}}]),t}();exports.GameManager=d;var p=new d(b);exports.gameManager=p,window.gameManager=p;
},{"../constants":"eKDL","../utils":"UnXq","./Base":"Cqth","./Explosion":"Bq5z","./PlayerTank":"xegc"}],"GiMC":[function(require,module,exports) {
"use strict";function e(e,a){return n(e)||r(e,a)||o(e,a)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(u){a=!0,o=u}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}}function n(e){if(Array.isArray(e))return e}function a(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,l=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw l}}}}function o(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.levelEditor=exports.LevelEditor=void 0;var s=require("./constants"),f=require("./gameplay/GameManager"),v=require("./utils"),g=document.getElementById("level-editor"),m=document.querySelectorAll(".pallete__color"),d=document.getElementById("level-editor__clear-level"),y={activePaletteColor:"pallete__color--active"},h={empty:null,brick:s.BlockType.Brick,stone:s.BlockType.Steel,tree:s.BlockType.Tree,water:s.BlockType.Water},b=s.BLOCK_SIZE*s.CLUSTER_SIZE,p=function(){function t(){var e=this;i(this,t),this.brush=null,this.hl=null,this.mousePressed=!1,m.forEach(function(t){t.addEventListener("click",function(r){var n=t.dataset.colorValue;if(n){var a=h[n];e.setBrush(a),m.forEach(function(e){e.classList.remove(y.activePaletteColor)}),t.classList.add(y.activePaletteColor)}})}),null==d||d.addEventListener("click",function(e){e.preventDefault(),f.gameManager.resetDebugLevel()}),f.gameManager.canvas.addEventListener("mousemove",function(t){var r=Math.floor(t.offsetX/b),n=Math.floor(t.offsetY/b);r>=0&&r<52/s.CLUSTER_SIZE&&n>=0&&n<52/s.CLUSTER_SIZE?(e.setHL({x:r,y:n}),e.mousePressed&&e.paintCell({x:r,y:n})):e.setHL(null)}),f.gameManager.canvas.addEventListener("mouseleave",function(){e.setHL(null)}),f.gameManager.canvas.addEventListener("mousedown",function(t){e.mousePressed=!0;var r=Math.floor(t.offsetX/b),n=Math.floor(t.offsetY/b);r>=0&&r<52/s.CLUSTER_SIZE&&n>=0&&n<52/s.CLUSTER_SIZE&&e.paintCell({x:r,y:n})}),f.gameManager.canvas.addEventListener("mouseup",function(){e.mousePressed=!1})}return c(t,[{key:"render",value:function(){f.gameManager.ctx.fillStyle="#000",f.gameManager.ctx.fillRect(0,0,s.CANVAS_WIDTH,s.CANVAS_HEIGHT);for(var t=s.BLOCK_SIZE*s.CLUSTER_SIZE,r=0;r<Math.floor(s.CANVAS_WIDTH/t);r++)f.gameManager.ctx.strokeStyle="#222",f.gameManager.ctx.lineWidth=1,f.gameManager.ctx.beginPath(),f.gameManager.ctx.moveTo(r*t,0),f.gameManager.ctx.lineTo(r*t,s.CANVAS_HEIGHT),f.gameManager.ctx.closePath(),f.gameManager.ctx.stroke(),f.gameManager.ctx.beginPath(),f.gameManager.ctx.moveTo(0,r*t),f.gameManager.ctx.lineTo(s.CANVAS_WIDTH,r*t),f.gameManager.ctx.closePath(),f.gameManager.ctx.stroke();var n,o=a(f.gameManager.debugLevel.entries());try{for(o.s();!(n=o.n()).done;){var l,i=e(n.value,2),u=i[0],c=a(i[1].entries());try{for(c.s();!(l=c.n()).done;){var g=e(l.value,2),m=g[0],d=g[1];null!==d&&v.renderCluster(d,m,u)}}catch(y){c.e(y)}finally{c.f()}}}catch(y){o.e(y)}finally{o.f()}this.hl&&(f.gameManager.ctx.strokeStyle="rgba(255,255,255,1)",f.gameManager.ctx.lineWidth=2,f.gameManager.ctx.strokeRect(this.hl.x*b,this.hl.y*b,b,b))}},{key:"setBrush",value:function(e){this.brush=e}},{key:"setHL",value:function(e){this.hl=e}},{key:"paintCell",value:function(e){f.gameManager.debugLevel[e.y][e.x]=this.brush,this.save()}},{key:"save",value:function(){f.gameManager.saveDebugLevel()}}]),t}();exports.LevelEditor=p;var E=new p;exports.levelEditor=E,window.levelEditor=E;
},{"./constants":"eKDL","./gameplay/GameManager":"T1jS","./utils":"UnXq"}],"bNHb":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=c();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AITank=void 0;var p=require("../constants"),l=require("../preload"),h=require("../utils"),y=require("./Tank"),b=2e3,d=4e3,v=1.5;function x(){var t=h.randomInt(1,8);return l.SPRITES["ai_tank_".concat(t)]}var m=function(t){o(i,y.Tank);var n=s(i);function i(t,r,o){var s;return e(this,i),(s=n.call(this,t,r,o,x())).nextDirChange=0,s.ai=!0,s.scheduleNextDirChange(),s}return r(i,[{key:"update",value:function(){var t=Date.now(),e=(this.pos.x,this.pos.y,{x:this.pos.x,y:this.pos.y});switch(this.dir){case p.DIR.LEFT:e.x-=v,this.pos.y=e.y=h.snapValue(this.pos.y);break;case p.DIR.RIGHT:e.x+=v,this.pos.y=e.y=h.snapValue(this.pos.y);break;case p.DIR.UP:e.y-=v,this.pos.x=e.x=h.snapValue(this.pos.x);break;case p.DIR.DOWN:e.y+=v,this.pos.x=e.x=h.snapValue(this.pos.x)}this.move(e)?(this.pos=e,t>=this.nextDirChange&&this.setRandomDir()):this.setRandomDir(),Math.random()<.015&&this.shoot()}},{key:"setRandomDir",value:function(){var t=Math.floor(4*Math.random());this.setDir(t),this.scheduleNextDirChange()}},{key:"scheduleNextDirChange",value:function(){var t=h.randomInt(b,d);this.nextDirChange=Date.now()+t}}]),i}();exports.AITank=m;
},{"../constants":"eKDL","../preload":"mKv2","../utils":"UnXq","./Tank":"aGzu"}],"ZCfc":[function(require,module,exports) {
"use strict";function e(e,t){return n(e)||a(e,t)||o(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,t=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(a.push(l.value),!r||a.length!==r);n=!0);}catch(u){t=!0,o=u}finally{try{n||null==i.return||i.return()}finally{if(t)throw o}}return a}}function n(e){if(Array.isArray(e))return e}function t(e,r){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=o(e))||r&&e&&"number"==typeof e.length){a&&(e=a);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,l=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw l}}}}function o(e,r){if(e){if("string"==typeof e)return l(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(e,r):void 0}}function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=e[a];return n}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./constants"),u=require("./preload"),f=require("./gameplay/GameManager"),c=require("./level-editor"),s=require("./gameplay/PlayerTank"),y=require("./gameplay/AITank"),g=require("./utils"),d=require("./gameplay/Body"),v=0,m=[[0,0],[190,0],[386,0]];function h(){var r,a=t(f.gameManager.tanks);try{for(a.s();!(r=a.n()).done;){r.value.update()}}catch(x){a.e(x)}finally{a.f()}var n,o=t(f.gameManager.bullets);try{for(o.s();!(n=o.n()).done;){n.value.update()}}catch(x){o.e(x)}finally{o.f()}var l,u=t(f.gameManager.explosions);try{for(u.s();!(l=u.n()).done;){l.value.update()}}catch(x){u.e(x)}finally{u.f()}var c,s=t(f.gameManager.tanks);try{for(s.s();!(c=s.n()).done;){var h=c.value;h.destroy&&f.gameManager.removeTank(h)}}catch(x){s.e(x)}finally{s.f()}var A,M=t(f.gameManager.bullets);try{for(M.s();!(A=M.n()).done;){var b=A.value;b.destroy&&f.gameManager.removeBullet(b)}}catch(x){M.e(x)}finally{M.f()}var p=Date.now();if(f.gameManager.tanks.length<4&&p-v>5e3){var T,I=e(m[g.randomInt(0,m.length)],2),E=I[0],S=I[1],k=new d.Body(E,S,i.TANK_WIDTH,i.TANK_HEIGHT),_=!0,w=t(f.gameManager.tanks);try{for(w.s();!(T=w.n()).done;){var D=T.value;g.AABBIntersects(D,k)&&(_=!1)}}catch(x){w.e(x)}finally{w.f()}var O,B=t(f.gameManager.bullets);try{for(B.s();!(O=B.n()).done;){var L=O.value;g.AABBIntersects(L,k)&&(_=!1)}}catch(x){B.e(x)}finally{B.f()}_&&(f.gameManager.tanks.push(new y.AITank(E,S,i.DIR.DOWN)),v=p)}}function A(){f.gameManager.ctx.fillStyle="#000",f.gameManager.ctx.fillRect(0,0,i.CANVAS_WIDTH,i.CANVAS_HEIGHT),f.gameManager.base.render();var e,r=t(f.gameManager.bullets);try{for(r.s();!(e=r.n()).done;){e.value.render()}}catch(d){r.e(d)}finally{r.f()}var a,n=t(f.gameManager.tanks);try{for(n.s();!(a=n.n()).done;){a.value.render()}}catch(d){n.e(d)}finally{n.f()}var o,l=t(f.gameManager.blocks);try{for(l.s();!(o=l.n()).done;){var u,c=t(o.value);try{for(c.s();!(u=c.n()).done;){var s=u.value;s&&s.render()}}catch(d){c.e(d)}finally{c.f()}}}catch(d){l.e(d)}finally{l.f()}var y,g=t(f.gameManager.explosions);try{for(g.s();!(y=g.n()).done;){y.value.render()}}catch(d){g.e(d)}finally{g.f()}}function M(){switch(f.gameManager.mode){case i.GLOBAL_MODE.NORMAL_GAME:f.gameManager.ctx.fillStyle="pink",f.gameManager.ctx.fillRect(0,0,i.CANVAS_WIDTH,i.CANVAS_HEIGHT);break;case i.GLOBAL_MODE.DEBUG_TEST_LEVEL:h(),A();break;case i.GLOBAL_MODE.EDIT_TEST_LEVEL:c.levelEditor.render()}window.setTimeout(M,1e3/60)}f.gameManager.tanks.push(new s.PlayerTank(128,386,i.DIR.UP)),u.preloadAssets().then(M);
},{"./constants":"eKDL","./preload":"mKv2","./gameplay/GameManager":"T1jS","./level-editor":"GiMC","./gameplay/PlayerTank":"xegc","./gameplay/AITank":"bNHb","./utils":"UnXq","./gameplay/Body":"P38Z"}]},{},["ZCfc"], null)
//# sourceMappingURL=main.497d6433.js.map